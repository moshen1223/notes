## 函数调用栈与任务队列
JavaScript有一个主进程(main tread)和一个调用堆栈(call stack)，在对一个调用堆栈中的task处理的时候，其他的都要等着。当在执行过程中遇到一些类似于setTimeout等异步操作的时候，会交给浏览器的其他模块进行处理，当到达setTimeout指定的延时执行时间之后，task(回调函数)会放入到任务队列之中。一般不同的异步任务的回调函数会放入不同的任务队列中(宏任务和微任务)。等到调用栈中所有的task执行完毕之后，接着去执行任务队列之中的task(回调函数)。    

![Image text](https://raw.githubusercontent.com/moshen1223/notes/master/image/%08%08%08%08%08module.jpg)

在图中，调用栈中遇到DOM操作、ajax请求、setTimeout等WebAPIs的时候就会交给浏览器另外内核的其他模块进行处理，等到其他模块处理完这些操作的时候将回调函数放入任务队列中，之后等栈中的task执行完毕之后再去执行任务队列中的回调函数。    

### 从setTimeout看事件循环机制
![Image text](https://raw.githubusercontent.com/moshen1223/notes/master/image/settimeout.png)    
## 小结
1) 所有的代码都要通过函数调用栈中调用执行。
2) 当遇到WebAPIs的时候，交给浏览器内核的其他模块进行处理。
3) 任务队列中存放的回调函数。
4) 等到调用栈中的task执行完之后再回去执行任务队列中的task，事件循环。
