## 作用域
作用域是指程序源代码中定义变量的区域。规定了如何查找变量，确定当前执行代码对变量的访问权限。    
换句话说，作用域就是一套规则，用于确定在何处以及如何 **查找变量**的规则。     
## 静态作用域与动态作用域
作用域有两种工作模式，一种是词法作用域，另外一种是动态作用域。     
JavaScript采用词法作用域，也就是静态作用域，函数的作用域在函数定义的时候就已经确定了。    
动态作用域，函数的作用域在函数调用的时候才决定的。      
再次强调，词法作用域就是作用域是由书写代码时函数声明的位置决定的。编译阶段就能够知道全部标识符在哪里以及是如何声明的，
所以词法作用域是静态的作用域，也就是说词法作用域能够预测在执行代码的过程中如何查找标识符。      
```
    var value = 1;
    function foo() {
        console.log(value);
    }
    function bar() {
        var value = 2;
        foo();
    }
    bar();
```
因为JavaScript采用的是词法作用域，所以结果为1。     
执行foo函数，先从foo函数内部查找是否有局部变量value，如果没用，就根据书写位置查找上面一层是否含有该变量，所以找到value=1。    

## 变量对象
变量对象是与执行上下文相关的数据作用域，存储了上下文中定义的变量和函数声明。    
### 全局上下文
全局上下文中定义的变量就是全局对象。    
全局对象是预定义的对象，作为JavaScript的全局函数和全局属性的占位符。通过使用全局对象，可以访问所有其他所有预定义的对象、函数和属性。    
在顶层JavaScript代码中，可以使用关键字this引用全局对象。因为全局对象是作用域链的头，这意味着所有非限定性的变量和函数名都会作为该对象的属性来查询。    
### 函数上下文
在函数上下文中，使用活动对象表示变量对象。    
活动对象是在进入函数上下文时被创建的，通过函数的anguments属性初始化。
### 执行过程
分两个阶段进行： 1、进入执行上下文 2、执行代码
#### 进入执行上下文
变量对象包括：    
    1. 函数的所有形参    
    &nbsp;&nbsp;a.由名称和对应值组成的一个变量对象的属性被创建    
    &nbsp;&nbsp;b.没有实参，属性值设为 undefined    
    2. 函数声明    
    &nbsp;&nbsp;a.由名称和对应值组成一个变量对象的属性被创建    
    &nbsp;&nbsp;b.如果变量对象已经存在相同名称的属性，则完全替换这个属性    
    3.变量声明    
    &nbsp;&nbsp;a.由名称和对应值组成一个变量对象的属性被创建    
    &nbsp;&nbsp;b.如果变量名称跟已经声明的形式参数或函数相同，则变量声明不会干扰已经存在的这类属性
#### 执行代码
在代码执行阶段，会顺序执行代码，根据代码，修改变量对象的值。

## 作用域链
当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到，会继续从父级(词法层面)执行上下文的变量对象中查找，一直找到全局上下文的变量对象，这样由多个执行上下文的变量对象构成的链表叫做作用域链。    
### 函数创建
函数作用域在函数定义的时候就决定了。    
函数的内部属性[[scope]]，当函数创建的时候，就会保存所有父变量对象到里边，[[scope]]就是所有父变量对象的层级链，但值得注意的是：[[scope]]并不代表完整的作用域链。    
### 函数激活
当函数激活时，进入执行上下文，就会将活动对象添加到作用链的前端。    



